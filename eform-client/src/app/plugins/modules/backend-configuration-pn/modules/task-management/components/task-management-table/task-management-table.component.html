<div>
  <mtx-grid
    [data]="workOrderCases"
    [columns]="tableHeaders"
    [cellTemplate]="{propertyName: propertyNameTpl, createdByName: createdByNameTpl, lastAssignedTo: lastAssignedToTpl, lastUpdatedBy: lastUpdatedByTpl, priority: priorityTpl, status: statusTpl, actions: actionsTpl}"
    [showPaginator]="false"
    [pageOnFront]="false"
    [rowStriped]="true"
    [showToolbar]="false"
    [showColumnMenuButton]="false"
    [sortActive]="selectTaskManagementPaginationSort$ | async"
    [sortDirection]="selectTaskManagementPaginationIsSortDsc$ | async"
    (sortChange)="sortTable($event)"
    style="max-height: 60vh;"
    noResultText="{{'No tasks found' | translate}}"
  >
  </mtx-grid>

</div>



<ng-template #propertyNameTpl let-row>
<!--  <mat-chip color="primary">-->
    <span>{{row.propertyName}}</span>
<!--  </mat-chip>-->
</ng-template>

<ng-template #createdByNameTpl let-row>
<!--  <mat-chip color="primary">-->
    <div>{{row.createdByName}}</div>
<!--  </mat-chip>-->
</ng-template>

<ng-template #lastAssignedToTpl let-row>
<!--  <mat-chip color="primary">-->
    <div>{{row.lastAssignedTo}}</div>
<!--  </mat-chip>-->
</ng-template>

<ng-template #lastUpdatedByTpl let-row>
<!--  <mat-chip color="primary">-->
    <div>{{row.lastUpdatedBy}}</div>
<!--  </mat-chip>-->
</ng-template>

<ng-template #priorityTpl let-row>
  <mat-chip color="primary" [ngClass]="getPriorityClass(row.priority)">
    <span>{{TaskManagementPrioritiesEnum[row.priority] | translate}}</span>
  </mat-chip>
</ng-template>

<ng-template #statusTpl let-row>
  <mat-chip color="primary">
    <span>{{row.status | translate}}</span>
  </mat-chip>
</ng-template>

<ng-template #actionsTpl let-row let-i="index">
  <div class="task-management-actions" id="action-items-{{i}}">
    <button id="actionMenu" mat-icon-button [matMenuTriggerFor]="menu" matTooltip="{{ 'Actions' | translate }}">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
      <button
        mat-menu-item
        id="taskManagementViewBtn-{{i}}"
        class="taskManagementViewBtn"
        (click)="onOpenViewModal(row.id)"
      >
        <mat-icon fontSet="material-symbols-outlined">edit_square</mat-icon>
        <span>{{ 'Edit task' | translate }}</span>
      </button>
      <button
        mat-menu-item
        id="taskManagementDeleteTaskBtn-{{i}}"
        class="taskManagementDeleteTaskBtn"
        (click)="onOpenDeleteModal(row)"
      >
        <mat-icon color="warn" fontSet="material-symbols-outlined">delete</mat-icon>
        <span>{{ 'Delete task' | translate }}</span>
      </button>
    </mat-menu>
  </div>
</ng-template>
