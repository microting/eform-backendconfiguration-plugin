<h3 mat-dialog-title>{{ (edit ? 'Edit employee' : 'New employee') | translate}}</h3>
<div mat-dialog-content class="d-flex flex-column">
  <mat-form-field>
    <mat-label>{{'First name' | translate }}</mat-label>
    <input
      matInput
      [disabled]="selectedDeviceUser.isLocked"
      [(ngModel)]="selectedDeviceUser.userFirstName"
      required
      type="text"
      id="firstName"
      name="userName">
  </mat-form-field>
  <mat-form-field>
    <mat-label>{{'Last name' | translate }}</mat-label>
    <input
      matInput
      [disabled]="selectedDeviceUser.isLocked"
      [(ngModel)]="selectedDeviceUser.userLastName"
      type="text"
      name="email"
      id="lastName"
      required>
  </mat-form-field>
  <mat-form-field>
    <mat-label>{{'Language' | translate }}</mat-label>
    <mtx-select
      id="profileLanguageSelector"
      [bindLabel]="'text'"
      [bindValue]="'locale'"
      [clearable]="false"
      [(ngModel)]="selectedDeviceUser.languageCode"
      [items]="languages">
    </mtx-select>
  </mat-form-field>
  <mat-slide-toggle
    *ngIf="authStateService.checkClaim('time_registration_enable')"
    color="primary"
    class="mb-2"
    id="timeRegistrationEnabledToggle"
    [checked]="selectedDeviceUser.timeRegistrationEnabled"
    [(ngModel)]="selectedDeviceUser.timeRegistrationEnabled">
    {{ "Timeregistration enabled" | translate }}
  </mat-slide-toggle>
  <mat-slide-toggle
    *ngIf="authStateService.checkClaim('task_management_enable')"
    color="primary"
    class="mb-2"
    id="taskManagementEnabledToggle"
    [checked]="selectedDeviceUser.taskManagementEnabled"
    [disabled]="selectedDeviceUser.hasWorkOrdersAssigned"
    [(ngModel)]="selectedDeviceUser.taskManagementEnabled">
    {{ "Task management enabled" | translate }}
  </mat-slide-toggle>

<!--  <mtx-grid-->
<!--    [data]="availableProperties"-->
<!--    [columns]="tableHeaders"-->
<!--    [pageOnFront]="false"-->
<!--    [rowStriped]="true"-->
<!--    [rowSelectable]="true"-->
<!--    [showPaginator]="false"-->
<!--    [rowSelected]="selectedProperties"-->
<!--    (rowSelectionChange)="changeArray($event)"-->
<!--  >-->
<!--  </mtx-grid>-->
  <div class="mtx-grid ng-star-inserted">
    <div class="mtx-grid-main mtx-grid-layout">
      <div class="mtx-grid-content mtx-grid-layout">
        <div class="mat-table-container mat-table-with-data">
          <table class="mat-table cdk-table mat-sort mat-table-striped ng-star-inserted" style="width: 100%">
            <thead>
            <tr role="rowgroup" class="mat-header-row cdk-header-row ng-star-inserted" mat-header-row>
              <th role="columnheader" class="mat-header-cell cdk-header-cell cdk-column-id mat-column-id ng-star-inserted mat-table-sticky mat-table-sticky-border-elem-top">ID</th>
              <th role="columnheader" class="mat-header-cell cdk-header-cell cdk-column-id mat-column-id ng-star-inserted mat-table-sticky mat-table-sticky-border-elem-top">{{ 'Property name' | translate }}</th>
              <th role="columnheader" class="mat-header-cell cdk-header-cell cdk-column-id mat-column-id ng-star-inserted mat-table-sticky mat-table-sticky-border-elem-top">{{ 'Select' | translate }}</th>
            </tr>
            </thead>
            <tbody id="pairingModalTableBody" role="rowgroup">
              <ng-container *ngFor="let property of availableProperties; let i = index">
                <tr  class="mat-row cdk-row ng-star-inserted {{i%2 ? 'mat-row-odd' : ''}}">
                  <td role="cell" class="mat-cell cdk-cell cdk-column-id mat-column-id ng-star-inserted" >{{ property.id }}</td>
                  <td role="cell" class="mat-cell cdk-cell cdk-column-id mat-column-id ng-star-inserted" id="propertyName">{{ property.name }}</td>
                  <td role="cell" class="mat-cell cdk-cell cdk-column-id mat-column-id ng-star-inserted" >
                    <div class="mat-checkbox">
                      <mat-checkbox class="mat-checkbox"
                        id="checkboxCreateAssignment{{ i }}"
                        (change)="
                                    addToArray(
                                      $event,
                                      getAssignmentByPropertyId(property.id).propertyId
                                    )
                                  "
                        [checked]="getAssignmentIsCheckedByPropertyId(property.id)"
                        [disabled]="selectedDeviceUser.isLocked && getAssignmentIsCheckedByPropertyId(property.id)"
                      ></mat-checkbox>
                      <label for="checkboxCreateAssignment{{ i }}"></label>
                    </div>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<div mat-dialog-actions class="d-flex flex-row justify-content-end">
  <button
    mat-raised-button
    color="accent"
    (click)="edit ? updateSingle() : createDeviceUser()"
    [disabled]="!selectedDeviceUser.userFirstName || !selectedDeviceUser.userLastName"
    id="{{edit ? 'saveEditBtn' : 'saveCreateBtn'}}"
  >
    {{(edit ? 'Save' : 'Create') | translate}}
  </button>
  <button
    mat-raised-button
    id="{{edit ? 'cancelEditBtn' : 'cancelCreateBtn'}}"
    (click)="hide()"
  >
    {{'Cancel' | translate}}
  </button>
</div>
